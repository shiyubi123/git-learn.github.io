(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{198:function(e,t,a){e.exports=a(406)},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},250:function(e,t){},253:function(e,t,a){},308:function(e,t,a){},319:function(e,t,a){},396:function(e,t,a){},402:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(203),a(204),a(29)),l=a(46),s=a(63),u=a(64),d=a(69),m=a(65),p=a(70),f=(a(205),a(97)),g=a.n(f),h=g.a.create({baseURL:"/api"}),E=a(66),b=a.n(E),y=(a(253),a(410)),v=a(414),O=a(140),k=(a(39),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).confirm=function(e){a.props.history.push("/r/".concat(a.rid,"/d/").concat(a.did,"/c/").concat(a.state.customs))},a.customsChange=function(e){a.setState({customs:e.target.value})},a.state={customs:0,dinfo:null},a.rid=e.match.params.rid,a.did=e.match.params.did,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=b()(),this.socket.on("connect",(function(){e.socket.emit("join desk",{desk:e.did})})),this.socket.on("someone in",(function(t){e.props.history.push("/r/".concat(e.rid,"/d/").concat(e.did,"/c/").concat(t))})),h.get("/deskinfo?did=".concat(this.did)).then((function(t){console.log(t),e.setState({dinfo:t.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{border:"1px solid rgb(235,237,240)",backgroundColor:"rgb(51,136,255)",fontFamily:"Microsoft Yahei"},title:"\u5c0a\u656c\u7684"+(this.state.dinfo?this.state.dinfo.tittle+"-"+this.state.dinfo.name:"\u8bf7\u7b49\u5f85\u52a0\u8f7d\u684c\u9762")+"\u684c\u987e\u5ba2\uff0c\u6b22\u8fce\u60a8\uff01"}),r.a.createElement("h2",{style:{textAlign:"center",position:"absolute",top:"30%",left:"30%"}},"\u8bf7\u9009\u62e9\u70b9\u9910\u4eba\u6570"),r.a.createElement(v.a.Group,{style:{position:"absolute",top:"40%"},value:this.state.customs,onChange:this.customsChange},r.a.createElement(v.a.Button,{value:1},"1"),r.a.createElement(v.a.Button,{value:2},"2"),r.a.createElement(v.a.Button,{value:3},"3"),r.a.createElement(v.a.Button,{value:4},"4")),r.a.createElement(O.a,{style:{position:"absolute",top:"50%"},type:"primary",onClick:function(){e.confirm(e.state.customs)},block:!0},"\u786e\u5b9a"))}}]),t}(n.Component)),x=Object(l.g)(k),j=a(43),w=a(22),C=(a(308),a(408)),P=a(10),D=a(185),S=a(413);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=C.a.Meta;function F(e){var t=e.food,a=e.onUpdateInc,o=e.onUpdateDec,c=t.count,i=Object(n.useState)(c),l=Object(w.a)(i,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){u(c)}),[c]),r.a.createElement("div",null,r.a.createElement(C.a,{style:{border:"5px solid rgb(235,237,240)"},actions:[r.a.createElement(O.a,{onClick:function(){s>0&&(u(s-1),o(t,s-1))}},r.a.createElement(P.a,{type:"minus"})),r.a.createElement("h2",null,s||0),r.a.createElement(O.a,{onClick:function(){return u(s+1),void a(t,s+1)}},r.a.createElement(P.a,{type:"plus"}))]},r.a.createElement(M,{style:{pointerEvents:"none"},avatar:r.a.createElement(D.a,{shape:"square",size:110,src:"/upload/"+t.img}),title:"\u540d\u79f0:"+t.name,description:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,"\u63cf\u8ff0:  ",t.desc),r.a.createElement("div",null,"\u4ef7\u683c:  ",t.price)))})))}function N(e){var t=e.details;return r.a.createElement("div",{className:"shopCartEX",style:{position:"absolute",top:"55px",width:"100%",maxWidth:"90%"}},t.map((function(e){return 0!==e.count?r.a.createElement("div",{style:{boxSizing:"border-box",maxWidth:"100%",margin:"5px"}},r.a.createElement("div",{style:{float:"left",width:"50%"}},"\u540d\u79f0:",e.name),r.a.createElement("div",{style:{float:"right",marginLeft:"20px"}},"\u4ef7\u683c\uff1a",e.count*e.price),r.a.createElement("div",{style:{float:"right"}},"\u6570\u91cf\uff1a",e.count)):void 0})))}function R(e){var t=e.total,a=e.details,o=e.placeOrder,c=Object(n.useState)(!1),i=Object(w.a)(c,2),l=i[0],s=i[1];function u(){s(!1)}return r.a.createElement("div",null,r.a.createElement(S.a,{title:"\u8d2d\u7269\u8f66",placement:"bottom",closable:!1,onClose:u,visible:l},r.a.createElement(N,{details:a}),r.a.createElement("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},r.a.createElement(O.a,{style:{marginRight:8},onClick:u},"\u6536\u8d77"),r.a.createElement(O.a,{onClick:function(){u(),o()},type:"primary"},"\u4e0b\u5355"))),r.a.createElement("div",{style:{position:"fixed",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},r.a.createElement(O.a,{type:"primary",onClick:function(){s(!0)},style:{float:"left"},disabled:!(t>0)},r.a.createElement(P.a,{type:"shopping-cart"}),"\u8d2d\u7269\u8f66"),r.a.createElement(O.a,{type:"primary",style:{float:"right",marginLeft:"10px"},onClick:o},"\u4e0b\u5355"),r.a.createElement("div",{style:{float:"right",lineHeight:"30px"}},"\u603b\u4ef7:",t)))}var q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).foodInc=function(e,t){var n=a.did;a.socket.emit("food inc",{food:e,count:t,deskid:n})},a.foodDec=function(e,t){var n=a.did;a.socket.emit("food dec",{food:e,count:t,deskid:n})},a.onInc=function(e,t){var n=a.state.foods.findIndex((function(t){return t.name===e.name}));if(n>=0){var r=t[n].count;a.state.foods[n].count=r}else a.state.foods.push(e);a.setState({foods:a.state.foods,order:B({},a.state.order,{totalPrice:a.state.order.totalPrice+e.price,details:t})}),console.log(a.state.foods)},a.onDec=function(e,t){var n=a.state.foods.findIndex((function(t){return t.name===e.name}));if(n>=0){if(t[n]){var r=t[n].count;a.state.foods[n].count=r}else a.state.foods[n].count=0;a.setState(B({},a.state,{order:B({},a.state.order,{totalPrice:a.state.order.totalPrice-e.price,details:t})}))}},a.placeOrder=function(){var e=B({},a.state.order,{details:JSON.stringify(a.state.order.details)});h.post("/restaurant/".concat(a.rid,"/desk/").concat(a.did,"/order"),e),a.props.history.push("/r/".concat(a.rid,"/d/").concat(a.did,"/placeorder")),a.socket.emit("order success",a.did)},a.state={deskinfo:null,foods:[],order:{deskName:null,totalPrice:0,memberCount:a.memberCount,details:[]}},a.memberCount=a.props.match.params.count,a.did=a.props.match.params.did,a.rid=a.props.match.params.rid,a.history=a.props.history,a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.get("/deskinfo?did=".concat(this.did)).then((function(t){e.setState({deskinfo:t.data,order:{deskName:t.data.name,totalPrice:0,memberCount:e.memberCount,details:[]}})})),h.get("/menu/restaurant/1").then((function(t){e.setState({foods:t.data})})),this.socket=b()(),this.socket.on("connect",(function(){e.socket.emit("join desk",{memberCount:e.memberCount,desk:e.did}),e.socket.emit("someone in",{memberCount:e.memberCount,desk:e.did})})),this.socket.on("cart food",(function(t){var a=e.state.foods;!function(e,t){for(var a in t){var n=e.findIndex((function(e){return e.name===t[a].name}));e[n].count=t[a].count}}(a,t.cartfood),t.totalPrice&&e.setState({foods:a,order:B({},e.state.order,{details:t.cartfood,totalPrice:t.totalPrice.total})}),console.log(e.state)})),this.socket.on("food inc",(function(t){e.onInc(t.food,t.menu)})),this.socket.on("food dec",(function(t){e.onDec(t.food,t.menu)})),this.socket.on("order success",(function(){e.props.history.push("/r/".concat(e.rid,"/d/").concat(e.did,"/placeorder"))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{border:"1px solid rgb(235,237,240)",backgroundColor:"rgb(51,136,255)",fontFamily:"Microsoft Yahei"},title:"\u83dc\u5355\u754c\u9762"}),this.state.foods.map((function(t){return r.a.createElement(F,{key:t.name,food:t,onUpdateInc:e.foodInc,onUpdateDec:e.foodDec})})),r.a.createElement(R,{total:this.state.order.totalPrice,details:this.state.order.details,placeOrder:this.placeOrder}))}}]),t}(n.Component),L=a(17),z=a.n(L),T=a(26),A=Object(l.g)((function(e){var t=Object(n.useState)({}),a=Object(w.a)(t,2),o=a[0],c=a[1],i=e.match.params,l=i.rid,s=i.did;if(Object(n.useEffect)((function(){Object(T.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/restaurant/".concat(l,"/desk/").concat(s,"/placeorder"));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),o.data){var u=JSON.parse(o.data.details),d=o.data.totalPrice;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{border:"1px solid rgb(235,237,240)",backgroundColor:"rgb(51,136,255)",fontFamily:"Microsoft Yahei"},title:"\u4e0b\u5355\u6210\u529f\uff01"}),u.map((function(e){return 0!==e.count?r.a.createElement("div",{style:{boxSizing:"border-box",borderBottom:"1px solid black",overflow:"hidden",maxWidth:"100%",margin:"5px"}},r.a.createElement("div",{style:{float:"left",width:"50%"}},"\u540d\u79f0:",e.name),r.a.createElement("div",{style:{float:"right",marginLeft:"20px"}},"\u4ef7\u683c\uff1a",e.count*e.price),r.a.createElement("div",{style:{float:"right"}},"\u6570\u91cf\uff1a",e.count)):void 0})),r.a.createElement("div",{style:{position:"fixed",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},r.a.createElement(O.a,{type:"primary",style:{float:"right",marginLeft:"10px"}},r.a.createElement("a",{href:"http://47.102.207.48/#/landing/r/1/d/1"},"\u518d\u6765\u4e00\u5355")),r.a.createElement("div",{style:{float:"right",lineHeight:"30px"}},"\u603b\u4ef7:",d)))}return r.a.createElement("div",null,"loading...")})),U=a(193),V=a(187),W=(a(319),a(411)),J=a(407),Y=a(409);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=C.a.Meta,K=W.a.Panel;function X(e){var t,a=e.order,o=e.onDelete,c=Object(n.useState)(a),i=Object(w.a)(c,2),l=i[0],s=i[1];function u(){return(u=Object(T.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.delete("restaurant/1/order/"+a.id),o(a);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(C.a,{style:{border:"5px solid rgb(235,237,240)"},actions:[r.a.createElement(O.a,null,r.a.createElement(P.a,{type:"printer"}),"\u6253\u5370"),r.a.createElement(O.a,{onClick:function(){h.put("restaurant/1/order/".concat(a.id,"/status"),{status:"confirmed"}).then((function(){s(H({},l,{status:"confirmed"}))}))}},r.a.createElement(P.a,{type:"check-circle"}),"\u786e\u8ba4"),r.a.createElement(O.a,{onClick:function(){h.put("restaurant/1/order/".concat(a.id,"/status"),{status:"completed"}).then((function(){s(H({},l,{status:"completed"}))}))}},r.a.createElement(P.a,{type:"file-done"}),"\u5b8c\u6210"),r.a.createElement(O.a,{onClick:function(){return u.apply(this,arguments)}},r.a.createElement(P.a,{type:"close-circle"}),"\u53d6\u6d88")]},r.a.createElement(G,{style:{pointerEvents:"none"},title:"\u684c\u53f7:"+l.deskName,description:r.a.createElement("div",null,"\u603b\u4ef7\u683c:"+l.totalPrice+"    \u4eba\u6570:"+l.memberCount+"    \u8ba2\u5355\u72b6\u6001:"+(t=l.status,"pending"===t?"  \u7b49\u5f85\u8ba2\u5355\u786e\u8ba4\u4e2d":"confirmed"===t?"  \u5df2\u786e\u8ba4":"  \u5df2\u5b8c\u6210"),r.a.createElement(W.a,null,r.a.createElement(K,{header:"\u8ba2\u5355\u8be6\u60c5",key:"1",style:{pointerEvents:"initial",marginBottom:"10px"}},r.a.createElement("div",null,l.details.map((function(e){return r.a.createElement("div",{style:{position:"relative"},key:e.name},r.a.createElement("div",{style:{float:"right"}},"\u6570\u91cf:"+e.count),r.a.createElement("div",{style:{width:"100px",position:"absolut",right:"0px"}},"\u83dc\u54c1:"+e.name))}))))))})))}var $=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).onDelete=function(e){var t=a.state.orders.findIndex((function(t){return t.id===e.id}));a.setState(Object(V.a)((function(e){e.orders.splice(t,1)})))},a.state={orders:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=b()(),this.socket.on("new order",(function(t){e.setState((function(a){return{orders:[t].concat(Object(U.a)(e.state.orders))}}))})),h.get("/restaurant/1/order").then((function(t){e.setState({orders:t.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,this.state.orders.length>0?this.state.orders.map((function(t){return r.a.createElement(X,{key:t.id,order:t,onDelete:e.onDelete})})):r.a.createElement(J.a,null)))}}]),t}(n.Component);Y.a.create({name:"orderManage"})($);function Q(){return r.a.createElement("div",null,"\u529f\u80fd\u5f00\u53d1\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...")}a(396);var Z=a(412);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae=C.a.Meta,ne=Y.a.create({name:"FoodManage"})((function(e){var t=Object(n.useState)([]),a=Object(w.a)(t,2),o=a[0],c=a[1];e.form.getFieldDecorator;return Object(n.useEffect)((function(){h.get("restaurant/1/food").then((function(e){c(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement(oe,{upProps:e}),r.a.createElement("div",null,o.map((function(t){return r.a.createElement(re,{key:t.id,food:t,upProps:e})}))))}));Y.a.create({name:"FoodItem"})(re);function re(e){var t=e.food,a=e.upProps,o=Object(n.useState)(t),c=Object(w.a)(o,2),i=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(w.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)({name:t.name,desc:t.desc,price:t.price,category:t.category,status:t.status,img:null}),f=Object(w.a)(p,2),g=f[0],E=f[1];function b(e){m(!1===e)}function y(e){E(te({},g,Object(j.a)({},e.target.name,e.target.value)))}function v(e){"on"===e.status?E(te({},e,{status:"off"})):E(te({},e,{status:"on"})),h.put("/restaurant/1/food/"+t.id,e)}return r.a.createElement("div",null,d?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(Z.a,{type:"text",onChange:y,defaultValue:i.name,name:"name",addonBefore:"\u540d\u79f0"}),r.a.createElement(Z.a,{type:"text",onChange:y,defaultValue:i.desc,name:"desc",addonBefore:"\u63cf\u8ff0"}),r.a.createElement(Z.a,{type:"text",onChange:y,defaultValue:i.price,name:"price",addonBefore:"\u4ef7\u683c"}),r.a.createElement(Z.a,{type:"text",onChange:y,defaultValue:i.category,name:"category",addonBefore:"\u5206\u7c7b"}),r.a.createElement(Z.a,{type:"file",onChange:function(e){E(te({},g,{img:e.target.files[0]}))},name:"img",addonBefore:"\u56fe\u7247"}))),r.a.createElement("div",null,r.a.createElement(O.a,{onClick:function(){return function(){var e=new FormData;for(var a in g){var n=g[a];e.append(a,n)}h.put("/restaurant/1/food/"+t.id,e).then((function(e){m(!1),l(e.data)}))}()}},"\u786e\u8ba4"),r.a.createElement(O.a,{onClick:function(){b(d)}},"\u8fd4\u56de"),r.a.createElement(O.a,{onClick:function(){return v(g)}},r.a.createElement(P.a,{type:"check-circle"}),"on"===g.status?"\u4e0a\u67b6":"\u4e0b\u67b6"))):r.a.createElement(C.a,{actions:[r.a.createElement(O.a,{onClick:function(){b(d)}},r.a.createElement(P.a,{type:"printer"}),"\u4fee\u6539"),r.a.createElement(O.a,{onClick:function(){return v(g)}},r.a.createElement(P.a,{type:"check-circle"}),"on"===g.status?"\u4e0a\u67b6":"\u4e0b\u67b6"),r.a.createElement(O.a,{onClick:function(){return e=a,void h.delete("/restaurant/1/food/"+t.id).then((function(){e.history.go(0)}));var e}},r.a.createElement(P.a,{type:"file-done"}),"\u5220\u9664")]},r.a.createElement(ae,{avatar:r.a.createElement(D.a,{shape:"square",size:110,src:"/upload/"+i.img}),title:i.name,description:r.a.createElement("div",null,r.a.createElement("div",null,"\u63cf\u8ff0\uff1a",i.desc?i.desc:"\u6682\u65e0\u63cf\u8ff0"),r.a.createElement("div",null,"\u4ef7\u683c\uff1a",i.price),r.a.createElement("div",null,"\u5206\u7c7b\uff1a",i.category?i.category:"\u6682\u672a\u5206\u7c7b"))})))}function oe(e){var t=Object(n.useState)(!1),a=Object(w.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)({name:null,desc:null,price:null,category:null,status:"on",img:null}),l=Object(w.a)(i,2),s=l[0],u=l[1];function d(){c(!1===o)}function m(e){u(te({},s,Object(j.a)({},e.target.name,e.target.value)))}return r.a.createElement("div",null,o?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(Z.a,{type:"text",onChange:m,name:"name",addonBefore:"\u540d\u79f0"}),r.a.createElement(Z.a,{type:"text",onChange:m,name:"desc",addonBefore:"\u63cf\u8ff0"}),r.a.createElement(Z.a,{type:"text",onChange:m,name:"price",addonBefore:"\u4ef7\u683c"}),r.a.createElement(Z.a,{type:"file",onChange:function(e){u(te({},s,{img:e.target.files[0]}))},name:"img",addonBefore:"\u56fe\u7247"}),r.a.createElement(Z.a,{type:"text",onChange:m,name:"category",addonBefore:"\u5206\u7c7b"}))),r.a.createElement("div",null,r.a.createElement(O.a,{onClick:function(){return function(e){var t=new FormData;for(var a in s){var n=s[a];t.append(a,n)}h.post("/restaurant/1/food",t).then((function(){e.history.go(0)}))}(e.upProps)}},"\u786e\u8ba4"),r.a.createElement(O.a,{onClick:function(){return d()}},"\u8fd4\u56de"))):r.a.createElement("div",null,r.a.createElement(O.a,{onClick:d,type:"primary ",block:!0},"\u6dfb\u52a0\u83dc\u54c1")))}var ce=Object(l.g)(ne);function ie(){return r.a.createElement("div",null,"\u529f\u80fd\u5f00\u53d1\u4e2d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85...")}a(402);var le=a(139),se=Y.a.create({name:"manage"})((function(e){var t=Object(l.f)(),a=Object(n.useState)("orderManage"),o=Object(w.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)(null),d=Object(w.a)(u,2),m=d[0],p=d[1];return Object(n.useEffect)((function(){Object(T.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/userinfo");case 3:a=e.sent,p(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),r.a.createElement("div",{className:"manageContainer"},r.a.createElement(y.a,{style:{border:"1px solid rgb(235,237,240)",backgroundColor:"rgb(51,136,255)",fontFamily:"Microsoft Yahei"},onBack:Object(T.a)(z.a.mark((function t(){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.get("/logout");case 2:e.history.push("/");case 3:case"end":return t.stop()}}),t)}))),title:m?"\u6b22\u8fce:"+m.tittle:"loading"}),r.a.createElement(le.a,{style:{border:"1px solid rgb(235,237,240)"},onClick:function(e){s(e.key)},selectedKeys:[c],mode:"horizontal"},r.a.createElement(le.a.Item,{style:{paddingLeft:"10px",paddingRight:"10px"},key:"orderManage"},r.a.createElement(P.a,{style:{margin:"5px"},type:"profile"}),r.a.createElement(i.b,{style:{float:"right"},to:"/manage/order"},"\u8ba2\u5355\u7ba1\u7406")),r.a.createElement(le.a.Item,{style:{paddingLeft:"10px",paddingRight:"10px"},key:"foodManage"},r.a.createElement(P.a,{style:{margin:"5px"},type:"appstore"}),r.a.createElement(i.b,{style:{float:"right"},to:"/manage/food"},"\u83dc\u54c1\u7ba1\u7406")),r.a.createElement(le.a.Item,{style:{paddingLeft:"10px",paddingRight:"10px"},key:"deskManage"},r.a.createElement(P.a,{style:{margin:"5px"},type:"appstore"}),r.a.createElement(i.b,{style:{float:"right"},to:"/manage/desk"},"\u684c\u9762\u7ba1\u7406")),r.a.createElement(le.a.Item,{style:{paddingLeft:"10px",paddingRight:"10px"},key:"settingManage"},r.a.createElement(P.a,{style:{margin:"5px"},type:"profile"}),r.a.createElement(i.b,{style:{float:"right"},to:"/manage/setting"},"\u8bbe\u7f6e"))),r.a.createElement("main",{style:{boxSizing:"border-box",border:"1px solid rgb(235,237,240)"}},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/manage/order",component:$}),r.a.createElement(l.a,{path:"/manage/desk",component:Q}),r.a.createElement(l.a,{path:"/manage/food",component:ce}),r.a.createElement(l.a,{path:"/manage/setting",component:ie}))))}));var ue=Object(l.g)(se),de=(a(403),a(415)),me=Y.a.create({name:"normal_login"})((function(e){var t=Object(n.useRef)(),a=e.form.getFieldDecorator;function o(){return(o=Object(T.a)(z.a.mark((function t(a){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.form.validateFields(function(){var t=Object(T.a)(z.a.mark((function t(a,n){var r,o,c;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=13;break}return r=n.username,o=n.password,c=n.captcha,t.prev=4,t.next=7,h.post("/login",{username:r,password:o,captcha:c});case 7:e.history.push("/manage/order"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),alert(t.t0.response.data.msg);case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,a){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"logPage"},r.a.createElement("div",{className:"logContainer"},r.a.createElement("h1",null,"\u5546\u6237\u767b\u5f55"),r.a.createElement(Y.a,{onSubmit:function(e){return o.apply(this,arguments)}},r.a.createElement(Y.a.Item,null,a("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d"}]})(r.a.createElement(Z.a,{prefix:r.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(Y.a.Item,null,a("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801"}]})(r.a.createElement(Z.a.Password,{prefix:r.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(Y.a.Item,null,a("captcha",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u9a8c\u8bc1\u7801"}]})(r.a.createElement(Z.a,{prefix:r.a.createElement(P.a,{type:"check",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u9a8c\u8bc1\u7801",style:{width:"140px",verticalAlign:"middle",height:"52px"}})),a("captcha",{})(r.a.createElement("img",{onClick:function(){console.log(t.current),t.current.src="",setTimeout((function(){pe=Date.now(),t.current.src="/api/captcha?"+pe}),1)},src:"/api/captcha?"+pe,ref:t}))),r.a.createElement(Y.a.Item,null,a("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(de.a,null,"\u8bb0\u4f4f\u6211")),r.a.createElement(i.b,{to:"/register"},r.a.createElement("a",{className:"register"},"\u7528\u6237\u6ce8\u518c")),r.a.createElement("br",null),r.a.createElement(O.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0},"\u767b\u5f55")))))})),pe=Date.now();var fe=Object(l.g)(me),ge=(a(404),Y.a.create({name:"normal_register"})((function(e){var t=e.form.getFieldDecorator;function a(){return(a=Object(T.a)(z.a.mark((function t(a){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.form.validateFields(function(){var t=Object(T.a)(z.a.mark((function t(a,n){var r,o,c,i;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=14;break}return r=n.username,o=n.password,c=n.email,i=n.tittle,t.prev=5,t.next=8,h.post("/register",{username:r,password:o,email:c,tittle:i});case 8:e.history.push("/login"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),alert(t.t0.response.data.msg);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e,a){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"registerContainer"},r.a.createElement("h1",null,"\u6ce8\u518c\u754c\u9762"),r.a.createElement(Y.a,{onSubmit:function(e){return a.apply(this,arguments)}},r.a.createElement(Y.a.Item,null,t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(r.a.createElement(Z.a,{placeholder:"\u7528\u6237\u540d\u6ce8\u518c"}))),r.a.createElement(Y.a.Item,null,t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801"}]})(r.a.createElement(Z.a.Password,{type:"password",placeholder:"\u5bc6\u7801\u8bbe\u7f6e"}))),r.a.createElement(Y.a.Item,null,t("email",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"}]})(r.a.createElement(Z.a,{placeholder:"\u90ae\u7bb1\u5730\u5740\u6ce8\u518c"}))),r.a.createElement(Y.a.Item,null,t("tittle",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e97\u540d"}]})(r.a.createElement(Z.a,{placeholder:"\u5e97\u540d\u6ce8\u518c"}))),r.a.createElement(O.a,{htmlType:"submit"},"\u6ce8\u518c"),r.a.createElement(O.a,{onClick:function(t){!function(t){t.preventDefault(),e.history.go(-1)}(t)},style:{float:"right"}},"\u8fd4\u56de")))})));var he=Object(l.g)(ge),Ee=a(27),be=Object(Ee.b)();var ye=function(){return r.a.createElement(i.a,null,r.a.createElement(l.c,{history:be},r.a.createElement(l.a,{path:"/",exact:!0,component:fe}),r.a.createElement(l.a,{path:"/landing/r/:rid/d/:did",component:x}),r.a.createElement(l.a,{path:"/r/:rid/d/:did/c/:count",component:q}),r.a.createElement(l.a,{path:"/r/:rid/d/:did/placeorder",component:A}),r.a.createElement(l.a,{path:"/manage",component:ue}),r.a.createElement(l.a,{path:"/login",component:fe}),r.a.createElement(l.a,{path:"/register",component:he})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(192),Oe=a.n(ve);window._=Oe.a,window.api=h,window.axios=g.a,c.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[198,1,2]]]);
//# sourceMappingURL=main.05451e5f.chunk.js.map